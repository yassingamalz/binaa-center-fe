<!-- src/app/layout/components/header/header.component.html -->
<header class="header" dir="rtl">
  <div class="header-container">
    <!-- Right Section -->
    <div class="header-right">
      <button 
        class="menu-toggle"
        (click)="toggleSidebar.emit()"
        aria-label="القائمة">
        <i class="fas" [class.fa-bars]="isSidebarCollapsed" [class.fa-times]="!isSidebarCollapsed"></i>
      </button>

      <!-- Logo for Mobile -->
      <div class="mobile-logo">
        <img src="assets/images/logo.png" alt="Binaa Center" class="logo-image">
      </div>

      <!-- Search Bar -->
      <div class="search-container">
        <form class="search-form" (submit)="onSearch($event)">
          <input 
            type="text"
            class="search-input"
            placeholder="بحث..."
            [(ngModel)]="searchQuery"
            name="search"
            [class.active]="isSearchActive">
          <button type="submit" class="search-button">
            <i class="fas fa-search"></i>
          </button>
        </form>
      </div>
    </div>

    <!-- Left Section -->
    <div class="header-left">
      <!-- Notifications -->
      <div class="notifications-dropdown" ngbDropdown>
        <button 
          class="notification-button"
          ngbDropdownToggle>
          <i class="fas fa-bell"></i>
          <span class="notification-badge">{{notificationCount}}</span>
        </button>
        <div 
          class="notification-menu"
          ngbDropdownMenu>
          <div class="notification-content">
            <h6 class="notification-header">الإشعارات</h6>
            <div class="notification-list">
              <div *ngFor="let notification of notifications" 
                   class="notification-item">
                <i [class]="notification.icon + ' ' + notification.iconClass"></i>
                <div class="notification-text">
                  <p>{{notification.message}}</p>
                  <span class="notification-time">{{notification.time}}</span>
                </div>
              </div>
            </div>
            <button class="view-all">عرض جميع الإشعارات</button>
          </div>
        </div>
      </div>

      <!-- User Profile -->
      <div class="user-dropdown" ngbDropdown>
        <button 
          class="user-button"
          ngbDropdownToggle>
          <div class="user-avatar">
            <i class="fas fa-user"></i>
          </div>
          <span class="user-name" *ngIf="currentUser$ | async as user">
            {{user.username}}
          </span>
        </button>
        <div class="user-menu" ngbDropdownMenu>
          <div class="menu-items">
            <button class="menu-item">
              <i class="fas fa-user-circle"></i>
              الملف الشخصي
            </button>
            <button class="menu-item">
              <i class="fas fa-cog"></i>
              الإعدادات
            </button>
            <div class="menu-divider"></div>
            <button class="menu-item logout" (click)="onLogout()">
              <i class="fas fa-sign-out-alt"></i>
              تسجيل الخروج
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Mobile Search -->
  <div class="mobile-search" *ngIf="showMobileSearch">
    <form class="mobile-search-form" (submit)="onSearch($event)">
      <input 
        type="text"
        class="mobile-search-input"
        placeholder="بحث..."
        [(ngModel)]="searchQuery"
        name="search">
      <button type="submit" class="mobile-search-button">
        <i class="fas fa-search"></i>
      </button>
    </form>
  </div>
</header>