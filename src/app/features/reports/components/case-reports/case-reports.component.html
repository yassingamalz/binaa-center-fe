<!-- src/app/features/reports/components/case-reports/case-reports.component.html -->
<div class="case-reports-container" [class.loading]="isLoading">
    <form [formGroup]="filtersForm" (ngSubmit)="generateRegistrationForm()">
      <div class="filters-section">
        <div class="form-group">
          <label>الحالة</label>
          <select class="form-control" formControlName="caseId"
                  [class.is-invalid]="filtersForm.get('caseId')?.touched && filtersForm.get('caseId')?.invalid">
            <option [ngValue]="null">اختر الحالة</option>
            <option *ngFor="let case of cases" [ngValue]="case.caseId">
              {{case.name}}
            </option>
          </select>
          <div class="invalid-feedback" 
               *ngIf="filtersForm.get('caseId')?.touched && filtersForm.get('caseId')?.invalid">
            يرجى اختيار الحالة
          </div>
        </div>
      </div>
  
      <div class="form-actions">
        <button type="submit" 
                class="btn-primary" 
                [disabled]="isLoading || filtersForm.invalid">
          <i class="fas fa-file-pdf"></i>
          {{ isLoading ? 'جاري إنشاء النموذج...' : 'إنشاء نموذج التسجيل' }}
        </button>
      </div>
    </form>
  
    <div class="loading-overlay" *ngIf="isLoading">
      <div class="loading-spinner"></div>
    </div>
  </div>