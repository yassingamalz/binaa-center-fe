<!-- src/app/layout/components/main-layout/main-layout.component.html -->
<ng-container *ngIf="currentUser$ | async as user; else loginLayout">
  <div class="main-layout" [class.sidebar-collapsed]="isSidebarCollapsed">
    <!-- Loading Overlay -->
    <div class="loading-overlay" *ngIf="isLoading$ | async">
      <div class="spinner-container">
        <div class="spinner"></div>
        <p>جاري التحميل...</p>
      </div>
    </div>

    <!-- Sidebar -->
    <aside class="sidebar" [class.collapsed]="isSidebarCollapsed">
      <app-sidebar></app-sidebar>
    </aside>

    <!-- Main Content Area -->
    <div class="main-content">
      <!-- Header -->
      <header class="header">
        <app-header 
          [isSidebarCollapsed]="isSidebarCollapsed"
          (toggleSidebar)="toggleSidebar()"
        ></app-header>
      </header>

      <!-- Main Content -->
      <main class="content" [class.loading]="isLoading$ | async">
        <router-outlet></router-outlet>
      </main>

      <!-- Footer -->
      <footer class="footer">
        <app-footer></app-footer>
      </footer>
    </div>
  </div>
</ng-container>

<!-- Auth Layout Template -->
<ng-template #loginLayout>
  <div class="auth-layout">
    <router-outlet></router-outlet>
  </div>
</ng-template>