<!-- Auth Layout Template -->
<ng-container *ngIf="isAuthRoute(); else mainLayout">
  <div class="auth-layout">
    <router-outlet></router-outlet>
  </div>
</ng-container>

<!-- Main Application Layout Template -->
<ng-template #mainLayout>
  <div class="main-layout" [class.sidebar-collapsed]="isSidebarCollapsed">
    <!-- Loading Overlay -->
    <div class="loading-overlay" *ngIf="isLoading$ | async">
      <div class="spinner-container">
        <div class="spinner"></div>
        <p>جاري التحميل...</p>
      </div>
    </div>

    <!-- Sidebar -->
    <aside class="sidebar" [class.collapsed]="isSidebarCollapsed">
      <app-sidebar></app-sidebar>
    </aside>

    <!-- Main Content Area -->
    <div class="main-content">
      <header class="header">
        <app-header 
          [isSidebarCollapsed]="isSidebarCollapsed"
          (toggleSidebar)="toggleSidebar()"
        ></app-header>
      </header>

      <main class="content" [class.loading]="isLoading$ | async">
        <router-outlet></router-outlet>
      </main>

      <footer class="footer">
        <app-footer></app-footer>
      </footer>
    </div>
  </div>
</ng-template>